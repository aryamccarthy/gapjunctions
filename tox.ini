[tox]
envlist = py27, py34, py35, py36, flake8

[testenv]
passenv = LC_ALL, LANG, HOME
commands = pytest --cov=gapjunctions {posargs:tests}
deps = -r{toxinidir}/test_requirements.txt
       -r{toxinidir}/requirements.txt

[testenv:flake8]
deps =
    flake8>=2.3.0
    pep8>=1.6.2
commands =
    flake8 gapjunctions tests setup.py

[testenv:cov-report]
commands = pytest --cov=gapjunctions --cov-report=term --cov-report=html


exclude =
    # No need to traverse our git directory
    .git,
    # There's no value in checking cache directories
    __pycache__,
    # The conf file is mostly autogenerated, ignore it
    docs/source/conf.py,
    # The old directory contains Flake8 2.0
    old,
    # This contains our built documentation
    build,
    # This contains builds of flake8 that we don't want to check
    dist

# Flake8 Configuration
[flake8]
# Ignore some flake8-docstrings errors
# NOTE(sigmavirus24): While we're still using flake8 2.x, this ignore line
# defaults to selecting all other errors so we do not need select=E,F,W,I,D
# Once Flake8 3.0 is released and in a good state, we can use both and it will
# work well \o/
ignore = D203, E731
exclude =
    .tox,
    .git,
    __pycache__,
    docs/source/conf.py,
    build,
    dist,
    tests/fixtures/*,
    *.pyc,
    *.egg-info,
    .cache,
    .eggs
max-complexity = 10
import-order-style = google

